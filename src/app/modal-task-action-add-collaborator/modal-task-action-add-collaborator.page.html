<ion-header>
  <div>
    <ion-toolbar class="varitaionslect ion-no-padding ion-no-margin" style="padding-top: 10px !important;">
      <ion-item class="ion-no-padding ion-no-margin" style="--inner-padding-end: 0 !important;" no-padding>
        <ion-row class="ion-align-items-end">
          <ion-col>
            <div class="txt500"><b>Add Collaborator</b></div>
          </ion-col>
        </ion-row>
      </ion-item>

      <ion-buttons slot="end">
        <ion-button (click)="dismiss()" class="closemodal" mode="ios" style="bottom: 35px; right: 0;">
          <ion-icon name="close-outline" style="color: #999;"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </div>
</ion-header>

<ion-content>
  <div class="grnlist">
    <ion-row class="polistitemv2" style="padding: 10px; margin-top: 10px;">
      <ion-col size="12">
        <ion-item lines="none">
          <ion-label style="font-size: 13px; color: #999;">Collaborator</ion-label>
          <ion-select [(ngModel)]="taskItemTransferTo" (ionChange)="onUserSelect($event.detail.value)" style="font-size: 13px;">
            <ion-select-option value="">Select Rider</ion-select-option>
            <ng-container *ngFor="let item of userList">
              <ion-select-option *ngIf="!item.selected" [value]="item.user_id">{{ item.name }}</ion-select-option>
            </ng-container>
          </ion-select>
        </ion-item>
      </ion-col>
    </ion-row>

    <div class="selected-collaborators" *ngIf="anyUserSelected">
      <ion-row>
        <ion-col size="12">
          <ion-item lines="none">
            <ion-label style="font-size: 13px; color: #999;">Selected Collaborators</ion-label>
          </ion-item>
          <table class="table" border="1" cellpadding="10" cellspacing="0">
            <thead>
            <tr>
              <th>Name</th>
              <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <ng-container *ngFor="let user of userList">
              <tr *ngIf="user.selected">
                <td>{{ user.name }}</td>
                <td>
                  <ion-button color="danger" size="small" (click)="deselectUser(user)" *ngIf="user.user_id !== main_rider">Remove</ion-button>
                  <ion-button color="primary" size="small" (click)="deselectUser(user)" *ngIf="user.user_id === main_rider" [disabled]="user.user_id === main_rider">Main</ion-button>
                </td>
              </tr>
            </ng-container>
            </tbody>
          </table>
        </ion-col>
      </ion-row>
    </div>
  </div>
</ion-content>

<ion-footer>
  <ion-button color="primary" mode="ios" (click)="submit()" expand="block">Confirm</ion-button>
  <ion-button color="danger" mode="ios" (click)="dismiss()" expand="block">Cancel</ion-button>
</ion-footer>
