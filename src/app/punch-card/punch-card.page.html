<app-common-header [pageSource]="'punch-card'" [headerTitle]="'Attendance'"></app-common-header>

<ion-content class="specialcontent whitepage" appSwipe (swipeLeft)="onSwipeLeft($event)" mode="ios">
	<ion-grid class="ion-no-padding">


		<ion-row>
			<ion-col size="12" style="padding:10px">
				<div style="margin-bottom:20px">
					<ion-button expand="block" color="warning" routerLink="/punching"><ion-icon name="time-outline"></ion-icon> Clock In</ion-button>
				</div>

				<h1>Attendance History</h1>
				<ion-item>
					<ion-label>Year</ion-label>
					<ion-select placeholder="Select One" [(ngModel)]="searchConfig.year">
						<ion-select-option value="{{x}}" *ngFor="let x of year_option">{{x}}</ion-select-option>
					</ion-select>
				</ion-item>
				<ion-item>
					<ion-label>Month</ion-label>
					<ion-select placeholder="Select One" [(ngModel)]="searchConfig.month">
						<ion-select-option value="{{x}}" *ngFor="let x of month_option">{{x}}</ion-select-option>
					</ion-select>
				</ion-item>
				<ion-button expand="full" (click)="get_punched_log()"><ion-icon name="search-outline"></ion-icon> Search</ion-button>
			</ion-col>
		</ion-row>
		<ion-item>
			<ion-row>
				<ion-col size="12">
					<ion-list>
						<ion-grid>
							<ion-row style="border-top:1px solid gray;border-bottom:1px solid gray;padding:10px 0;background-color:lightgray">
								<ion-col size="6">Date</ion-col>
								<ion-col size="3">Clock-In</ion-col>
								<ion-col size="3">Clock-Out</ion-col>
							</ion-row>
						</ion-grid>
					</ion-list>
				</ion-col>
				<ion-col size="12" *ngFor="let item of resultList">
					<ion-list>
						<ion-grid>
							<ion-row style="border-bottom:1px solid gray;padding-bottom:7px">
								<ion-col size="6">{{item.date}}</ion-col>
								<ion-col size="3">
									<div *ngIf="item.date <= today">
										<span *ngIf="item.clock_in" (click)="view_detail(item.clock_in_data)">{{item.clock_in}}</span>
										<span *ngIf="!item.clock_in">-</span>
									</div>
									<div *ngElse>
										<span *ngIf="item.clock_in">{{item.clock_in}}</span>
										<span *ngIf="!item.clock_in"></span>
									</div>
								</ion-col>
								<ion-col size="3">
									<div *ngIf="item.date <= today">
										<span *ngIf="item.clock_out" (click)="view_detail(item.clock_out_data)">{{item.clock_out}}</span>
										<span *ngIf="!item.clock_out">-</span>
									</div>
									<div *ngElse>
										<span *ngIf="item.clock_out">{{item.clock_out}}</span>
										<span *ngIf="!item.clock_out"></span>
									</div>
								</ion-col>
							</ion-row>
						</ion-grid>

					</ion-list>

				</ion-col>
			</ion-row>
		</ion-item>

	</ion-grid>
</ion-content>
<mytab></mytab>